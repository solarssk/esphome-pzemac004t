esphome:
  name: esp-pzemac
  comment: "Power monitoring node"
  # area: "Roof"  # optionally define area in Home Assistant

esp8266:
  board: esp01_1m

logger:
  baud_rate: 0

web_server:
  port: 80

api:
  encryption:
    key: "HERE WILL BE THE CODE GENERATED BY ESPHOME"

ota:
  - platform: esphome
    password: "HERE WILL APPEAR THE PASSWORD GENERATED BY ESPHOME"

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password

  ap:
    ssid: "ESP06-Fallback"
    password: "123456789"

captive_portal:

uart:
  tx_pin: RX
  rx_pin: TX
  baud_rate: 9600
  stop_bits: 1

modbus:

button:
  - platform: restart
    name: "Restart device"

sensor:
  - platform: pzemac
    address: 1
    current:
      name: "Current"
      id: pzem_current
      unit_of_measurement: "A"
    voltage:
      name: "Voltage"
      id: pzem_voltage
      unit_of_measurement: "V"
    energy:
      name: "Energy"
      id: pzem_energy
      unit_of_measurement: "kWh"
      accuracy_decimals: 2
      filters:
        - lambda: return x / 1000.0;
    power:
      name: "Power"
      id: pzem_power
      unit_of_measurement: "W"
    frequency:
      name: "Frequency"
      id: pzem_frequency
      unit_of_measurement: "Hz"
    power_factor:
      name: "Power Factor"
      id: pzem_power_factor
      unit_of_measurement: "%"
    update_interval: 10s
    id: pzemac_device

  - platform: wifi_signal
    name: "Wi-Fi Signal"
    update_interval: 60s

binary_sensor:
  - platform: status
    name: "Connection Status"